## 4장 내용 정리

### 협력

- 요청과 응답으로 이루어져 있다.

### 책임

- 요청에 대해 행동할 `의무` 가 있는 경우
- “객체지향 개발에서 가장 중요한 능력은 능숙하게 소프트웨어 객체에 할당하는 것” - 크레이그 라만 ( Craig Larman )
- 책임에 대한 구체적인 구현은 객체와 책임이 제자리를 잡은 후에 해도 늦지 않다.
- 객체와 책임이 이리저리 왔다갔다하는 상황 속에서 성급하게 구현을 하는 것은 변경에 취약하고 다양한 협력에 참여할 수 없는 비 자율적인 객체를 만든다.

  ⇒ 성급한 구현보다 큰틀을 생각하는 설계 능력을 기르자!


- 책임의 분류

  책임은 하는 것 아는 것으로 구성된다.

    - 하는 것 (doing)
        - 객체를 생성하거나 계산을 하는 등의 스스로 하는 것
        - 다른 객체의 행동을 시작시키는 것
        - 다른 객체의 활동을 제어하고 조절하는 것

      ⇒ 팩토리 메서드 ?

    - 아는 것 (knowing)
        - 개인적인 정보에 관해 아는 것
        - 관련된 객체에 관해 아는 것
        - 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것

      ⇒ getter 가 여기에 해당되는 것인가?

- 책임과 메시지
    - 객체가 다른 객체에게 주어진 책임을 수행하도록 요청을 보내는 것을 `메시지 전송(message-send)` 라고 한다.
    - 두 객체 간의 협력은 `메시지`를 통해 이루어진다.
    - 요청하는 객체를 송신자 , 요청을 처리하는 객체를 수신자
    - `메시지` 는 협력을 위해 한 객체가 다른 객체로 접근할 수 있는 `유일한` 방법이다.

### 역할

- 책임의 집합을 의미
- 재사용 가능하고 유연한 객체지향 설계를 낳는 매우 중요한 `구성요소`
- 예시로 나온 재판과정은 세 가지로 나뉘어진다. 이는 세 개의 협력을 의미한다.  협력에 등장인물들을 제외하면 유사한 과정을 가지고 있기 때문에 하나의 협력으로 다루고 싶다.

  ⇒ 역할을 사용해서 세 가지 재판과정을 하나의 협력으로 `추상화` 할 수 있다.

- 역할은 협력 내에서 다른 객체로 대체할 수 있음을 나타내는 일종의 `표식`
- 역할을 대체하기 위해선 각 역할이 수신할 수 있는 메시지를 동일한 방식으로 이해해야 한다.

⇒ 역할의 개념을 사용하면 유사한 협력을 `추상화`해서 인지 과부하를 줄일 수 있다.

⇒ 다양한 객체들이 협력에 참여할 수 있다. → 협력에 유연해지고 , 재사용성이 높아진다.

- `역할`은 객체지향 설계의 `단순성(simplicity)`  , `유연성(flexibility)` , `재사용성(reusability)` 을 뒷받침하는 핵심 개념

### 객체지향 설계 기법

- 책임-주도 설계 ( Responsibility - Driven - Design )
    - 협력에 필요한 책임들을 식별하고 적합한 객체에게 책임을 할당하는 방식의 설계
- 디자인 패턴 (Design Pattern)
    - 반복적으로 사용하는 해결 방법을 정의해 놓은 설계 템플릿의 모음
    - 패턴 : 전문가들이 특정 문제를 해결하기 위해 미리 만들어 놓은 역할 , 책임, 협력의 모음
- 테스트-주도 개발 ( Test-Driven Development )
    - 테스트를 먼저 작성하고 테스트를 통과하는 구체적인 코드를 추가하면서 개발을 완성해나가는 방식
    - 테스트-주도 개발은 `설계` 를 위한 기법 , 핵심은 테스트 작성이 아니고 구체적인 코드를 작성해나가면서 역할, 책임, 협력을 식별하고 식별된 역할, 책임, 협력이 적합한지를 피드백받는 것이 핵심

### 책임-주도 설계

- 객체지향 시스템을 설계하는 절차
    1. 시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악한다.
    2. 시스템 책임을 더 작은 책임으로 분할한다.
    3. 분할된 책임을 수행 할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당한다.
    4. 객체가 책임을 수행하는 중에 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다.
    5. 해당 객체 또는 역할에 책임을 할당함으로써 두 객체가 협력하게 한다.

- 역할, 책임, 협력은 유연하고 견고한 객체지향 시스템을 만드는데 필요한 가장 중요한 재료다.

### 디자인 패턴

- 책임-주도설계는 방법과 절차를 제시 , 반면 디자인 패턴은 책임-주도 설계의 결과를 표현한다.
- 패턴은 모범이 되는 설계
- GOF 디자인 패턴은 23개의 디자인 패턴들을 상세하게 정리해놓음

### 테스트-주도 개발

- 애자일 방법론의 한 종류인 XP의 기본 프랙티스로 소개되면서 주목받기 시작한 설계 기법
- 기본 흐름 : 실패하는 테스트 작성 → 테스트를 통과하는 간단한 코드 작성 → 리팩터링을 통해 중복 제거
- TDD을 통해 작동하는 깔끔한 코드 ( clean code that works ) 를 얻을 수 있다.
- 객체지향에 대한 깊이 있는 지식을 요구한다.
- TDD는 책임-주도 설계의 기본 개념과 다양한 원칙과 프랙티스 , 패턴을 이해하고 좋은 설계에 대한 감각과 경험을 길러야만 적용할 수 있다.

### 개인적인 생각

- 지속적으로 책에서 `협력` 을 강조한다. 객체는 멋있고 외딴 섬이 아닌 협력하는 존재이다. 하나의 멋있는 객체를 만들기 보단 유연한 협력을 하는 자율적인 객체들의 집합을 만드는 것이 객체지향의 목표라는 생각이 든다.
- 역할의 설명을 들으면서 공용인터페이스의 사용이 중요하다는 느낌을 받았다. 언제 변할지 모르는 애플리케이션 서비스에 대해서 대비할 수 있는 것은 구현체에 집중하는 것이 아니라 역할에 집중하는 것이라는 생각이 들었다.